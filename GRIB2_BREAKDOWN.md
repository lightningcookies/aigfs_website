# GRIB2 File Breakdown: `aigfs_example.grib2`

This document provides a summary of the contents and structure of the example GRIB2 file used for training the ML collector.

## File Summary
- **Source:** GFS (Global Forecast System) via NCEP
- **Edition:** GRIB2
- **Resolution:** 0.25° x 0.25° (Global Grid: 721 latitudes x 1440 longitudes)
- **Reference Time (Run Start):** January 3, 2026, 00:00 UTC
- **Forecast Step:** 324 hours (13.5 days)
- **Valid Time (Forecast Target):** January 16, 2026, 12:00 UTC

## Parameter Groups (Datasets)

The file contains 4 distinct parameter groups, categorized by their vertical levels or surface types.

### 1. Wind (10 Meters Above Ground)
- **Variables:**
  - `u10`: 10 metre U wind component (m/s) - *East-West component*
  - `v10`: 10 metre V wind component (m/s) - *North-South component*
- **Level:** `heightAboveGround = 10.0m`

### 2. Temperature (2 Meters Above Ground)
- **Variables:**
  - `t2m`: 2 metre temperature (Kelvin)
- **Level:** `heightAboveGround = 2.0m`
- **Note:** To convert to Celsius: $°C = K - 273.15$

### 3. Mean Sea Level Pressure
- **Variables:**
  - `prmsl`: Pressure reduced to Mean Sea Level (Pascal)
- **Level:** `meanSea = 0.0`

### 4. Total Precipitation
- **Variables:**
  - `tp`: Total Precipitation ($kg/m^2$ or $mm$)
- **Level:** `surface = 0.0`
- **Note:** In GFS, `tp` is typically the **accumulated** precipitation from the start of the forecast run (Step 0) to the current Step.

## Technical Details for `ml_collector.py`

When using `xarray` and `cfgrib` to extract data, you must filter by the correct keys to avoid conflicts between different vertical levels.

### Example Filter Keys:
| Variable | `shortName` | `typeOfLevel` | `level` |
| :--- | :--- | :--- | :--- |
| **Temperature** | `t2m` | `heightAboveGround` | `2` |
| **Wind (U)** | `u10` | `heightAboveGround` | `10` |
| **Wind (V)** | `v10` | `heightAboveGround` | `10` |
| **Pressure** | `prmsl` | `meanSea` | `0` |
| **Precipitation** | `tp` | `surface` | `0` |

### Coordinate Mapping
- **Latitude:** -90.0 to 90.0
- **Longitude:** 0.0 to 359.75
  - *Note:* Longitudes in GRIB are 0-360. If your input coordinates are -180 to 180 (e.g., -111.63 for Alta), you may need to convert them: `lon_grib = (lon_deg + 360) % 360`. `xarray.sel(..., method='nearest')` usually handles this if the dataset is correctly indexed, but it's good to be aware of.

---
*Generated by `analyze_grib.py`*
